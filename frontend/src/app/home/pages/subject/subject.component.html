<app-container *ngIf="subject">
  <!-- Subject -->
  <h1 class="text-2xl sm:text-3xl">{{ subject.name }}</h1>
  <p>{{ subject.syllabus }}</p>
  <p>
    <span class="font-bold">Study program</span>:
    <a
      routerLink
      [routerLink]="['/study-programs', subject.studyProgram.id]"
      class="text-blue-500 hover:text-blue-700"
    >
      {{ getStudyProgramDisplay(subject.studyProgram) }}
    </a>
  </p>
  <p>
    <span class="font-bold">Professor</span>:
    {{ getTeacherDisplay(subject.professor) }}
  </p>
  <p>
    <span class="font-bold">Assistant</span>:
    {{ getTeacherDisplay(subject.assistant) }}
  </p>
  <p>
    <span class="font-bold">Semester</span>:
    {{ subject.semester }}
  </p>
  <p>
    <span class="font-bold">ECTS</span>:
    {{ subject.ects }}
  </p>

  <mat-tab-group mat-stretch-tabs>
    <!-- Subject materials -->
    <mat-tab label="Subject materials">
      <div class="px-2 py-5 space-y-4">
        <mat-card
          *ngFor="let subjectMaterial of subjectMaterials"
          class="mat-elevation-z8"
        >
          <mat-card-header>
            <mat-card-title>
              {{ subjectMaterial.name }}
            </mat-card-title>
            <mat-card-subtitle>
              Published on
              {{ formatDateTime(subjectMaterial.publicationDate) }} by
              {{ getTeacherDisplay(subjectMaterial.teacher) }}
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p class="mb-1">{{ subjectMaterial.description }}</p>
            <a
              [attr.href]="subjectMaterial.resourceUrl"
              class="text-blue-500 hover:text-blue-700"
            >
              Click here to open resources
            </a>
          </mat-card-content>
        </mat-card>
        <p *ngIf="!subjectMaterials">No subject materials are found!</p>
      </div>
    </mat-tab>

    <!-- Subject notifications -->
    <mat-tab label="Subject notifications">
      <div class="px-2 py-5 space-y-4">
        <mat-card
          *ngFor="let subjectNotification of subjectNotifications"
          class="mat-elevation-z8"
        >
          <mat-card-header>
            <mat-card-title>
              {{ subjectNotification.name }}
            </mat-card-title>
            <mat-card-subtitle>
              Published on
              {{ formatDateTime(subjectNotification.publicationDate) }} by
              {{ getTeacherDisplay(subjectNotification.teacher) }}
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p class="mb-1">{{ subjectNotification.description }}</p>
          </mat-card-content>
        </mat-card>
        <p *ngIf="!subjectNotifications">No subject notifications are found!</p>
      </div>
    </mat-tab>

    <!-- Subject terms -->
    <mat-tab label="Subject terms">
      <div class="px-2 py-5 space-y-4">
        <mat-card
          *ngFor="let subjectTerm of subjectTerms"
          class="mat-elevation-z8"
        >
          <mat-card-header>
            <mat-card-title>
              {{ subjectTerm.name }}
            </mat-card-title>
            <mat-card-subtitle>
              Held by {{ getTeacherDisplay(subjectTerm.teacher) }} from
              {{ formatDateTime(subjectTerm.startTime) }} to
              {{ formatDateTime(subjectTerm.endTime) }}
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p class="mb-1">{{ subjectTerm.description }}</p>
          </mat-card-content>
        </mat-card>
        <p *ngIf="!subjectTerms">No subject terms are found!</p>
      </div>
    </mat-tab>

    <!-- Exams -->
    <mat-tab label="Exams">
      <div class="px-2 py-5 space-y-4">
        <mat-card *ngFor="let exam of exams" class="mat-elevation-z8">
          <mat-card-header>
            <mat-card-title>
              {{ exam.name }}
            </mat-card-title>
            <mat-card-subtitle>
              {{ getExamTypeDisplay(exam.examType) }}
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>Minimum score: {{ exam.minimumScore }}</p>
            <p class="mb-2">Maximum score: {{ exam.maximumScore }}</p>
            <p class="mb-1">{{ exam.description }}</p>
          </mat-card-content>
        </mat-card>
        <p *ngIf="!exams">No exams are found!</p>
      </div>
    </mat-tab>

    <!-- Exam terms -->
    <mat-tab label="Exam terms">
      <div class="px-2 py-5 space-y-4">
        <mat-card *ngFor="let examTerm of examTerms" class="mat-elevation-z8">
          <mat-card-header>
            <mat-card-title>
              {{ examTerm.exam.name }}
            </mat-card-title>
            <mat-card-subtitle>
              {{ getExamPeriodDisplay(examTerm.examPeriod) }}
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>Start time: {{ formatDateTime(examTerm.startTime) }}</p>
            <p class="mb-1">End time: {{ formatDateTime(examTerm.endTime) }}</p>
          </mat-card-content>
        </mat-card>
        <p *ngIf="!examTerms">No exam terms are found!</p>
      </div>
    </mat-tab>
  </mat-tab-group>
</app-container>
